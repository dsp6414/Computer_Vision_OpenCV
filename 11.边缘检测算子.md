# 边缘检测算子

## 梯度

梯度： 梯度是一个向量，梯度方向指向函数变化最快的方向，大小就是它的模，也是最大的变化率， 对于二元函数z=f(x,y)，它在点(x,y)的梯度就是 , ![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/grad1.png)
    或者 ![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/grad2.png)
：![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/grad3.png)


这个梯度向量的幅度和方向角为：

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/grad4.png)


## 图像梯度

图像梯度即图像中灰度变化的度量，求图像梯度的过程是二维离散函数求导过程。边缘其实就是图 像上灰度级变化很快的点的集合。

下图展示了一个灰度图的数学化表达，像素点(x,y)的灰度值是f(x,y),它有八个邻域。

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/imggrad.png)

图像在点(x,y)的梯度为：

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/imggrad1.png)

其中![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/imggrad2.png)即gx对应图像的水平方向, 其中![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/imggrad3.png)即为gy对应图像的竖直方向



## 模板卷积


要理解梯度图的生成，就要先了解模板卷积的过程，模板 卷积是模板运算的一种方式，其步骤如下： 

（1）将模板在输入图像中漫游，并将模板中心与图像中 某个像素位置重合； 

（2）将模板上各个系数与模板下各对应像素的灰度相乘； 

（3）将所有乘积相加（为保持灰度范围，常将结果再除 以模板系数之和，后面梯度算子模板和为0的话就不需要 除了）； 

（4）将上述运算结果（模板的响应输出）赋给输出图像 中对应模板中心位置的像素。

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/conv.png)

## 梯度图

梯度图的生成和模板卷积相同，不同的是要生成梯 度图，还需要在模板卷积完成后计算在点(x,y)梯度 的幅值，将幅值作为像素值，这样才算完。 注意：梯度图上每个像素点的灰度值就是梯度向量 的幅度 生成梯度图需要模板，右图为水平和竖直方向最简 单的模板。 

水平方向：![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/gradhori.png)

最简单的水平梯度模板：
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/gradhori1.png)

竖直方向：![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/gradvert.png)

最简单的垂直梯度模板:
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/gradvert1.png)


## 梯度算子
梯度算子是一阶导数算子，是水平G(x)和竖直G(y)方向对应模板的组合，也有对角线方向


常见的一阶算子： Roberts交叉算子，Prewitt算子，Sobel算子


Roberts交叉算子:
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/robert.png)
Roberts交叉算子其本质是一个对角线方向的梯度算子，对应的水平方向和竖直方向的梯度分别为：

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/robert1.png)

优点：边缘定位较准，适用于边缘明显且噪声较少的图像。 

缺点： 

（1）没有描述水平和竖直方向的灰度变化，只关注了对角线方向，容易造成遗漏。 

（2）鲁棒性差。由于点本身参加了梯度计算，不能有效的抑制噪声的干扰。


## Prewitt算子
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/prewitt.png)

Prewitt算子是典型的3*3模板，其模板中心对应要求梯度的原图像坐标(x,y)，(x,y)对应的8-邻域的像 素灰度值如下表所示：

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/prewitt1.png)

通过Prewitt算子的水平模板M(x)卷积后，对应的水平方向梯度为：
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/prewitt2.png)
通过Prewitt算子的竖直模板M(y)卷积后，对应的竖直方向梯度为:
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/prewitt3.png)
输出梯度图在(x,y)的灰度值为:
![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/prewitt4.png)
Prewitt算子引入了类似局部平均的运算，对噪声具有平滑作用，较Roberts算子更能抑制噪声。